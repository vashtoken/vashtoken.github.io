<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>$VASH — Pre-LP Community Fund</title>
<style>
  :root{
    --bg:#0e0e0e; --card:#121212; --accent:#70e0ff; --muted:#999;
    --success:#23d18b;
  }
  body{font-family:system-ui,Segoe UI,Roboto,monospace;background:var(--bg);color:#fff;margin:0;padding:24px;display:flex;align-items:flex-start;justify-content:center;min-height:100vh}
  .wrap{max-width:880px;width:100%}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);padding:20px;border-radius:12px}
  h1{margin:0 0 8px;font-size:1.4rem}
  p.lead{color:var(--muted);margin:0 0 16px}
  .row{display:flex;gap:16px;flex-wrap:wrap}
  .left{flex:1;min-width:240px}
  .right{width:260px;min-width:200px}
  .wallet-box{background:#0b0b0b;padding:12px;border-radius:8px;border:1px dashed rgba(255,255,255,0.03)}
  .addr{font-family:monospace;word-break:break-all;color:#fff;font-size:0.95rem}
  .small{font-size:0.85rem;color:var(--muted)}
  button.copy{margin-top:10px;padding:8px 12px;border-radius:8px;border:0;background:var(--accent);color:#000;font-weight:600;cursor:pointer}
  .qr{display:flex;justify-content:center;padding:8px}
  .balance{margin-top:10px;font-weight:700;font-size:1.2rem}
  .progress-wrap{margin-top:14px}
  .progress-bg{height:14px;background:#0a0a0a;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.03)}
  .progress-bar{height:100%;background:linear-gradient(90deg,var(--accent),#a1fffb);width:0%}
  .meta{display:flex;justify-content:space-between;align-items:center;margin-top:8px;font-size:0.85rem;color:var(--muted)}
  .link-explorer{color:var(--accent);text-decoration:none}
  .donor-list{margin-top:14px;max-height:160px;overflow:auto;border-radius:8px;padding:8px;background:rgba(255,255,255,0.01)}
  .donor-item{font-family:monospace;font-size:0.85rem;margin-bottom:6px}
  .disclaimer{margin-top:18px;color:#cfcfcf;background:rgba(255,255,255,0.02);padding:12px;border-radius:8px;font-size:0.88rem}
  footer{margin-top:18px;color:var(--muted);font-size:0.85rem}
  @media(max-width:720px){.row{flex-direction:column}.right{width:100%}}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Community Liquidity Fund — $VITALIK WASHERE (VASH)</h1>
      <p class="lead">Voluntary donations will be used to seed and lock the initial liquidity pool on Base. Donations are transparent and will be published before the launch. This is not an investment — see disclaimer below.</p>

      <div class="row">
        <div class="left">
          <div class="wallet-box">
            <div class="small">Donation Wallet (public)</div>
            <div id="addr" class="addr">DONATION_ADDRESS</div>
            <div style="margin-top:8px">
              <button class="copy" id="copyBtn">Copy address</button>
              &nbsp;
              <a id="explorerLink" class="link-explorer" href="#" target="_blank">View on explorer</a>
            </div>

            <div class="balance" id="balance">Balance: —</div>
            <div class="small">Target: <strong id="targetDisplay">TARGET_ETH ETH</strong></div>

            <div class="progress-wrap">
              <div class="progress-bg" aria-hidden>
                <div id="progressBar" class="progress-bar" style="width:0%"></div>
              </div>
              <div class="meta">
                <div id="percentText">0%</div>
                <div id="rawText" class="small">0 / TARGET_ETH ETH</div>
              </div>
            </div>

            <div class="donor-list" id="donorList" aria-live="polite">
              <!-- recent donors (if available) -->
              <div class="small">Recent contributors (tx list link below)</div>
            </div>
          </div>
        </div>

        <div class="right">
          <div style="text-align:center">
            <div class="qr" id="qrWrap">
              <!-- QR image will be set dynamically -->
              <img id="qrImage" src="" alt="qr" style="width:140px;height:140px;border-radius:8px;background:#fff;padding:6px"/>
            </div>
            <div class="small">Scan to donate</div>
            <div style="height:16px"></div>
            <div class="small">Explorer</div>
            <div style="margin-top:8px"><a id="txs" class="link-explorer" href="#" target="_blank">View transactions</a></div>
          </div>
        </div>
      </div>

      <div class="disclaimer">
        <strong>Disclaimer:</strong> Donations are fully voluntary and non-refundable. Contributions will be used to seed the $VASH liquidity pool and lock LP tokens. Contributions do not represent an investment, ownership, or guarantee of profit. Check the donation wallet and transactions on the public explorer. Your contribution is at your own risk.
        <div style="margin-top:8px" class="small">If you live in a jurisdiction where crypto fund contributions are restricted, do not contribute.</div>
      </div>

      <footer>
        <div>When target is reached we will announce: pool address, initial price, and lock proof (lock tx & lock provider link).</div>
      </footer>
    </div>
  </div>

<script>
/*
  Configuration - EDIT THESE VALUES:
  - DONATION_ADDRESS: the wallet that will receive donations
  - API_PROVIDER: 'basescan' or 'etherscan' (or other Etherscan-API-compatible explorer)
  - API_KEY: your explorer API key (optional, recommended)
  - TARGET_ETH: how many ETH (or native token) you want (number)
  - EXPLORER_BASE_URL: base explorer url (eg https://basescan.org)
*/
const DONATION_ADDRESS = "0xeb187d9Ba73249e1C1D31bf30c85Ebe47fD85e85";        // e.g. 0xc30709F9...
const API_PROVIDER = "basescan";                           // 'basescan' or 'etherscan' (or an etherscan clone)
const API_KEY = "REPLACE_WITH_API_KEY_IF_YOU_HAVE_ONE";    // optional
const TARGET_ETH = Number(0.01);                              // target in ETH (or Base ETH)
const EXPLORER_BASE_URL = "https://basescan.org";          // url to explorer for links

// helper: format ETH (wei -> ETH)
function fromWei(weiStr){
  try{
    const bn = BigInt(weiStr.toString());
    const eth = Number(bn) / 1e18;
    return eth;
  }catch(e){ return 0; }
}

// set UI initial values
document.getElementById('addr').textContent = DONATION_ADDRESS;
document.getElementById('targetDisplay').textContent = TARGET_ETH + " ETH";
document.getElementById('explorerLink').href = `${EXPLORER_BASE_URL}/address/${DONATION_ADDRESS}`;
document.getElementById('txs').href = `${EXPLORER_BASE_URL}/address/${DONATION_ADDRESS}`;

// QR - use Google Chart API (no key)
const qrSrc = `https://chart.googleapis.com/chart?cht=qr&chs=300x300&chl=ethereum:${DONATION_ADDRESS}`;
document.getElementById('qrImage').src = qrSrc;

// copy button
document.getElementById('copyBtn').addEventListener('click', async ()=>{
  try{
    await navigator.clipboard.writeText(DONATION_ADDRESS);
    document.getElementById('copyBtn').textContent = 'Copied!';
    setTimeout(()=>document.getElementById('copyBtn').textContent = 'Copy address', 1600);
  }catch(e){
    alert('Copy failed. Manual copy: ' + DONATION_ADDRESS);
  }
});

// function: try to fetch balance from Etherscan-like API
async function fetchBalance(){
  // build API URL depending on provider
  let url = "";
  if(API_PROVIDER === 'etherscan'){
    url = `https://api.etherscan.io/api?module=account&action=balance&address=${DONATION_ADDRESS}&tag=latest&apikey=${API_KEY}`;
  } else if(API_PROVIDER === 'basescan'){
    // many Etherscan forks (BaseScan, BSCScan, etc.) use the same query format.
    // If this doesn't work due to CORS, see notes below about server/proxy.
    url = `https://api.basescan.org/api?module=account&action=balance&address=${DONATION_ADDRESS}&tag=latest&apikey=${API_KEY}`;
  } else {
    console.warn('Unknown API_PROVIDER, skipping fetch');
    return null;
  }

  try{
    const resp = await fetch(url);
    if(!resp.ok){
      console.warn('balance fetch http not ok', resp.status);
      return null;
    }
    const data = await resp.json();
    // many explorers return { status: "1", result: "123..." }
    if(data && (data.result || data.balance)){
      const value = data.result || data.balance;
      return fromWei(value);
    }
    console.warn('unexpected API response', data);
    return null;
  }catch(err){
    console.warn('balance fetch error', err);
    return null;
  }
}

// update UI with result
async function update(){
  const bal = await fetchBalance();
  const balNode = document.getElementById('balance');
  const rawNode = document.getElementById('rawText');
  const pctNode = document.getElementById('percentText');
  const bar = document.getElementById('progressBar');

  if(bal === null){
    // fallback: link explorer for manual check
    balNode.innerHTML = `Balance: <span class="small">Unable to fetch (CORS or API). <a class="link-explorer" href="${EXPLORER_BASE_URL}/address/${DONATION_ADDRESS}" target="_blank">View on explorer</a></span>`;
    rawNode.textContent = `0 / ${TARGET_ETH} ETH`;
    pctNode.textContent = '0%';
    bar.style.width = '0%';
    return;
  }

  // display
  const rounded = Math.round(bal * 100000) / 100000;
  balNode.textContent = `Balance: ${rounded} ETH`;
  rawNode.textContent = `${rounded} / ${TARGET_ETH} ETH`;
  let pct = Math.min(100, Math.round((rounded / TARGET_ETH) * 100));
  pctNode.textContent = pct + '%';
  bar.style.width = pct + '%';
}

// run initial update
update();

// Optionally refresh every N seconds
setInterval(update, 60_000); // refresh every 60s

</script>
</body>
</html>
