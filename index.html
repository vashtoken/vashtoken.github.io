<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>$VASH Community Liquidity Fund</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #111;
            color: white;
            text-align: center;
            padding: 20px;
        }
        .header {
            max-width: 700px;
            margin: auto;
            background: #222;
            padding: 20px;
            border-radius: 10px;
        }
        .wallet-box {
            background: #222;
            padding: 20px;
            border-radius: 10px;
            display: inline-block;
            margin-top: 20px;
        }
        .wallet-address {
            font-size: 14px;
            word-break: break-all;
        }
        .balance {
            font-size: 18px;
            margin: 10px 0;
            color: #0f0;
        }
        .contributors {
            margin-top: 20px;
            text-align: left;
            display: inline-block;
        }
        .contributors h3 {
            margin-bottom: 10px;
            text-align: center;
        }
        .tx {
            font-size: 14px;
            margin: 4px 0;
        }
        img {
            margin: 10px 0;
            border: 3px solid white;
            border-radius: 10px;
        }
        .disclaimer {
            max-width: 800px;
            margin: 30px auto 0;
            font-size: 12px;
            color: #bbb;
            background: #1a1a1a;
            padding: 15px;
            border-radius: 8px;
            text-align: justify;
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>Community Liquidity Fund — $VITALIK WAS HERE (VASH)</h1>
        <p>Voluntary donations will be used to seed and lock the initial liquidity pool on Base. 
        Donations are transparent and will be published before the launch. 
        This is <strong>not</strong> an investment — see disclaimer below.</p>
    </div>

    <div class="wallet-box">
        <p><strong>Donation Wallet:</strong></p>
        <p class="wallet-address" id="wallet-address"></p>
        <p class="balance">Balance: <span id="wallet-balance">Loading...</span> ETH</p>
        <img id="qr-code" src="" width="180" height="180" alt="QR Code">
        <div class="contributors">
            <h3>Recent Contributors</h3>
            <div id="tx-list">Loading...</div>
        </div>
    </div>

    <div class="disclaimer">
        <strong>Disclaimer:</strong> Donations are fully voluntary and non-refundable. 
        Contributions will be used to seed the $VASH liquidity pool and lock LP tokens. 
        Contributions do not represent an investment, ownership, or guarantee of profit. 
        Check the donation wallet and transactions on the public explorer. 
        Your contribution is at your own risk. If you live in a jurisdiction where crypto fund contributions are restricted, do not contribute.
    </div>

<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<script>
    const donationWallet = "0xeb187d9Ba73249e1C1D31bf30c85Ebe47fD85e85";
    const baseBlockscoutAPI = "https://base.blockscout.com/api";

    document.getElementById("wallet-address").innerText = donationWallet;
    document.getElementById("qr-code").src = `https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=${donationWallet}`;

    // Fetch balance from Base Blockscout
    async function fetchBalance() {
        try {
            const res = await fetch(`${baseBlockscoutAPI}?module=account&action=balance&address=${donationWallet}`);
            const data = await res.json();
            if (data.status === "1") {
                document.getElementById("wallet-balance").innerText = parseFloat(ethers.utils.formatEther(data.result)).toFixed(4);
            } else {
                document.getElementById("wallet-balance").innerText = "0.0000";
            }
        } catch (err) {
            document.getElementById("wallet-balance").innerText = "Error";
        }
    }

    // Fetch recent contributors from Base Blockscout
    async function fetchRecentTxs() {
        try {
            const res = await fetch(`${baseBlockscoutAPI}?module=account&action=txlist&address=${donationWallet}&sort=desc`);
            const data = await res.json();
            if (data.status === "1") {
                let txHtml = "";
                const seen = new Set();
                data.result.forEach(tx => {
                    if (tx.to && tx.to.toLowerCase() === donationWallet.toLowerCase() && !seen.has(tx.hash)) {
                        seen.add(tx.hash);
                        const shortFrom = tx.from.slice(0, 6) + "..." + tx.from.slice(-4);
                        const amountEth = parseFloat(ethers.utils.formatEther(tx.value)).toFixed(4);
                        txHtml += `<div class="tx">${amountEth} ETH from ${shortFrom}</div>`;
                    }
                });
                document.getElementById("tx-list").innerHTML = txHtml || "No recent contributions";
            } else {
                document.getElementById("tx-list").innerText = "No data";
            }
        } catch (err) {
            document.getElementById("tx-list").innerText = "Error fetching transactions";
        }
    }

    // Initial load
    fetchBalance();
    fetchRecentTxs();

    // Auto refresh every 30 seconds
    setInterval(() => {
        fetchBalance();
        fetchRecentTxs();
    }, 30000);
</script>

</body>
</html>
